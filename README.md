# üì∞ RSS News Bot

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –±–æ—Ç –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ RSS-–ª–µ–Ω—Ç –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π –≤ Telegram —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AI-—Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏.

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **üì° –ú—É–ª—å—Ç–∏-–∏—Å—Ç–æ—á–Ω–∏–∫–∏** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ RSS-–ª–µ–Ω—Ç
- **ü§ñ AI-—Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫—Ä–∞—Ç–∫–∏—Ö —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–π —á–µ—Ä–µ–∑ Gemini API –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π Ollama
- **‚ö° –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å aiohttp
- **üîÑ Round-Robin —Ä–µ–∂–∏–º** - —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º
- **üíæ –£–º–Ω—ã–π –∫–µ—à** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π
- **üìä –ë–∞—Ç—á–µ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞** - –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ø–∞—É–∑–∞ –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- **‚è∞ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏** - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ª–∏–º–∏—Ç –¥–Ω–µ–π –¥–ª—è –Ω–æ–≤–æ—Å—Ç–µ–π

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.7+** —Å asyncio
- **AI-–º–æ–¥–µ–ª–∏**: Google Gemini API / Ollama (–ª–æ–∫–∞–ª—å–Ω–æ)
- **–ü–∞—Ä—Å–∏–Ω–≥**: feedparser, BeautifulSoup4
- **HTTP-–∫–ª–∏–µ–Ω—Ç**: aiohttp
- **Telegram Bot API**
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞—Ç**: datetime, timezone

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```bash
git clone <your-repo-url>
cd rss-news-bot
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏ venv\Scripts\activate  # Windows
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:
```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
TELEGRAM_TOKEN=your_telegram_bot_token
CHAT_ID=your_chat_id

# RSS-–ª–µ–Ω—Ç—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
RSS_URLS=https://example1.com/rss,https://example2.com/feed

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä—Å–µ—Ä–∞
INTERVAL=600
NEWS_LIMIT=5
DAYS_LIMIT=1
ROUND_ROBIN_MODE=1

# AI-—Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
AI_STUDIO_KEY=your_gemini_api_key
AI_MODEL=gemini-2.5-flash

# –õ–æ–∫–∞–ª—å–Ω–∞—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Ollama
OLLAMA_MODEL=gpt-oss:20b
OLLAMA_MODEL_FALLBACK=gpt-oss:120b

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞—Ç—á–µ–π
BATCH_SIZE_SMALL=5
PAUSE_SMALL=3
BATCH_SIZE_MEDIUM=15
PAUSE_MEDIUM=5
BATCH_SIZE_LARGE=25
PAUSE_LARGE=10
SINGLE_MESSAGE_PAUSE=1

# –§–∞–π–ª—ã
SENT_LINKS_FILE=sent_links.json
TIMEZONE=Europe/Moscow
```

## üöÄ –ó–∞–ø—É—Å–∫

### –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫:
```bash
python bot.py
```

### –° Docker:
```dockerfile
FROM python:3.11
COPY . /app
WORKDIR /app
RUN pip install -r requirements.txt
CMD ["python", "bot.py"]
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `TELEGRAM_TOKEN` - —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather
- `CHAT_ID` - ID —á–∞—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
- `RSS_URLS` - —Å–ø–∏—Å–æ–∫ RSS-–ª–µ–Ω—Ç —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
- `INTERVAL` - –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 600)
- `NEWS_LIMIT` - –ª–∏–º–∏—Ç –Ω–æ–≤–æ—Å—Ç–µ–π –∑–∞ –æ–¥–Ω—É –∏—Ç–µ—Ä–∞—Ü–∏—é
- `DAYS_LIMIT` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç –Ω–æ–≤–æ—Å—Ç–µ–π –≤ –¥–Ω—è—Ö

### –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã:
- `ROUND_ROBIN_MODE=1` - —á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- `ROUND_ROBIN_MODE=0` - —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—è–¥–æ–∫

### AI-—Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è:
- **Gemini API**: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `AI_STUDIO_KEY` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Google Gemini
- **Ollama –ª–æ–∫–∞–ª—å–Ω–æ**: –∑–∞–ø—É—Å—Ç–∏—Ç–µ Ollama —Å–µ—Ä–≤–µ—Ä –Ω–∞ `127.0.0.1:11434`

## üìù –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π

–ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ–≤–æ—Å—Ç–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
```
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üì∞ –ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏
üì° –ò—Å—Ç–æ—á–Ω–∏–∫ | üóì 25.12.2024, 14:30
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üí¨ –ö—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ AI...

ü§ñ –ú–æ–¥–µ–ª—å: gemini-2.5-flash
üîó –ß–∏—Ç–∞—Ç—å —Å—Ç–∞—Ç—å—é
```

## üîß –§–∞–π–ª—ã –¥–∞–Ω–Ω—ã—Ö

- `sent_links.json` - –∏—Å—Ç–æ—Ä–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
- `news_queue.json` - –æ—á–µ—Ä–µ–¥—å –Ω–µ–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π  
- `parser.log` - –ª–æ–≥ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞

## üêõ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ë–æ—Ç –≤–µ–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
```python
logging.basicConfig(
    level=logging.INFO,
    format="%(asctime)s | %(levelname)s | %(message)s",
    handlers=[logging.StreamHandler(sys.stdout),
              logging.FileHandler("parser.log", encoding="utf-8")]
)
```

## ü§ù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:
–ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å—Ç–µ RSS-URL –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `RSS_URLS` –≤ `.env` —Ñ–∞–π–ª–µ.

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏:
–ò–∑–º–µ–Ω–∏—Ç–µ –ø—Ä–æ–º–ø—Ç –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö `summarize()` –∏–ª–∏ `summarize_ollama()`.

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞:
–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–æ—á–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:
- `fetch_and_check()` - –ø–∞—Ä—Å–∏–Ω–≥ RSS
- `summarize()` - AI-—Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è  
- `send_news()` - –ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏

## ‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –î–ª—è —Ä–∞–±–æ—Ç—ã —Å Gemini API –Ω–µ–æ–±—Ö–æ–¥–∏–º –∞–∫–∫–∞—É–Ω—Ç –≤ Google AI Studio
- –õ–æ–∫–∞–ª—å–Ω–∞—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ Ollama
- –ë–æ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–æ–Ω—ã –∏ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞—Ç
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö —Å–±–æ—è—Ö